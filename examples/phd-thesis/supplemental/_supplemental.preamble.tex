% Include packages
\input{../thesis.preamble.packages}

% Include general definitions applicable to a thesis
\input{../thesis.preamble.generic}

% Include specific definitions and commands specific to this thesis
\input{../thesis.preamble.specific}

% Update resourceroot to reflect that supplemental files are in a subdirectory
\renewcommand{\resourceroot}{..}

% Set paragraph properties
\setlength{\parindent}{0em}
\setlength{\parskip}{0.9em}

% Set up custom IDs, labels etc.
\newcommand{\supplementID}{S\supplementNumber}
\newcommand{\supplementTitle}{\supplementID\quad\supplementName}
\edef\supplementLabelIdentifier{s\supplementNumber.}

% Command to generate section labels
\newcommand{\supplementLabel}[2]{#1\supplementLabelIdentifier#2}


% Define custom section etc. labelling
% Redefine \thesection to include the supplement ID
\renewcommand{\thesection}{\supplementID.\arabic{section}}
\renewcommand{\thefigure}{\supplementID.\arabic{figure}}
\renewcommand{\thetable}{\supplementID.\arabic{table}}
\AtBeginDocument{
	\renewcommand{\thelstlisting}{\supplementID.\arabic{lstlisting}}
}


% Shortcut commands to define labels
\newcommand{\defineSectionLabel}[2]{%
	\edef#1{\supplementLabel{sec:}{#2}}%
}
\newcommand{\defineSubsectionLabel}[2]{%
	\edef#1{\supplementLabel{subsec:}{#2}}%
}
\newcommand{\defineTableLabel}[2]{%
	\edef#1{\supplementLabel{tab:}{#2}}%
}
\newcommand{\defineFigureLabel}[2]{%
	\edef#1{\supplementLabel{fig:}{#2}}%
}
\newcommand{\defineListingLabel}[2]{%
	\edef#1{\supplementLabel{lst:}{#2}}%
}

\newcommand{\writeSectionLabel}[1]{%
	\supplementLabel{sec:}{#1}%
}
\newcommand{\writeSubsectionLabel}[1]{%
	\supplementLabel{subsec:}{#1}%
}
\newcommand{\writeTableLabel}[1]{%
	\supplementLabel{tab:}{#1}%
}
\newcommand{\writeFigureLabel}[1]{%
	\supplementLabel{fig:}{#1}%
}
\newcommand{\writeListingLabel}[1]{%
	\supplementLabel{lst:}{#1}%
}


\renewcommand{\headrule}{\hbox to\headwidth{\color{gray}\leaders\hrule height \headrulewidth\hfill}}
\renewcommand{\footrule}{\hbox to\headwidth{\color{gray}\leaders\hrule height \footrulewidth\hfill}}


\fancypagestyle{supplementaryOLD}{
	\fancyhf{}
	\fancyhead[L]{\supplementTitle}
	\fancyhead[R]{\titlemain}
	\fancyfoot[C]{\thepage}
}

\fancypagestyle{supplementary}{
	\fancyhf{}
	
	% Header customization
	\renewcommand{\headrulewidth}{0.4pt} % Line above header
	\fancyhead[L]{
		\textcolor{gray}{\textit{{\footnotesize \titlemain} {\footnotesize}}} \\
		\textcolor{gray}{\textbf{\small \supplementTitle}}
	}
	
	% Footer customization
	\renewcommand{\footrulewidth}{0.4pt} % Line above footer

	\fancyfoot[L]{
		\scriptsize 
		\ifdefined\doiThis
			\textcolor{gray}{DOI (this document): {\footnotesize \hyperrefDoi{\doiThis}{gray}}} \\%
		\fi
		\ifdefined\doiIndex
			% Check if \showIndexDoi is defined and explicitly set to \false
			\ifdefined\showIndexDoi
				\expandafter\ifx\showIndexDoi\false
				% Do nothing
			\else
				\textcolor{gray}{DOI (index): {\footnotesize \hyperrefDoi{\doiIndex}{gray}}} \\%
			\fi
			\else
				% If \showIndexDoi is not defined, show the index line
				\textcolor{gray}{DOI (index): {\footnotesize \hyperrefDoi{\doiIndex}{gray}}} \\%
			\fi
		\fi
		\textcolor{gray}{\tiny \today}%
	}

	\fancyfoot[R]{
		\small
		\textcolor{darkgray}{\textit{Page \thepage~of~\pageref{LastPage}}}
	}

}

\setlength{\topskip}{25pt}

\pagestyle{supplementary}



